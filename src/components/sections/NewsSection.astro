---
import { Image } from "astro:assets";
import NewsCard from "../cards/NewsCard.astro";
import bg2Image from "../../assets/BG2 4.png";
import articleImage from "../../assets/article.png";
import { Swiper, SwiperWrapper, SwiperSlide, SwiperButtonPrev, SwiperButtonNext } from "astro-swiper";
import { ChevronLeftIcon, ChevronRightIcon } from "@lucide/astro";

const news = [
	{
		title: "Kfood Expands to All over Punjab",
		excerpt: "Stay updated with the happenings at Kfood - New launches, Partnerships and more.",
		date: "January 28, 2026",
		category: "Launch",
		image: articleImage,
	},
	{
		title: "Kfood Expands to All over Punjab",
		excerpt: "Stay updated with the happenings at Kfood - New launches, Partnerships and more.",
		date: "January 28, 2026",
		category: "Partnership",
		image: articleImage,
	},
	{
		title: "Kfood Expands to All over Punjab",
		excerpt: "Stay updated with the happenings at Kfood - New launches, Partnerships and more.",
		date: "January 28, 2026",
		category: "Event",
		image: articleImage,
	},
	{
		title: "Kfood Expands to All over Punjab",
		excerpt: "Stay updated with the happenings at Kfood - New launches, Partnerships and more.",
		date: "January 28, 2026",
		category: "Expansion",
		image: articleImage,
	},
];
const newsForSwiper = [...news, ...news];
---

<section id='news-section' class='relative py-20 overflow-hidden bg-primary'>
	<div class='absolute inset-0 w-full h-full opacity-40 pointer-events-none overflow-hidden' aria-hidden='true'>
		<Image src={bg2Image} alt='' class='w-full h-full object-cover object-center' quality={100} />
	</div>
	<div class='relative z-10 px-6 md:px-10 lg:px-16'>
		<div class='text-center mb-12 px-4'>
			<h2 class='!text-white mb-2 text-heading-section'>News & Updates</h2>
			<p class='!text-white mx-auto text-body-lg'>
				Stay updated with the happenings at Kfood - New launches, Partnerships and more.
			</p>
		</div>

		<div class='news-swiper-wrap w-full'>
			<Swiper
				uniqueClass='news-swiper'
				useCustomElement={false}
				options={{
					slidesPerView: 1,
					slidesPerGroup: 1,
					spaceBetween: 24,
					loop: true,
					navigation: {
						nextEl: ".news-swiper .swiper-button-next",
						prevEl: ".news-swiper .swiper-button-prev",
					},
					breakpoints: {
						640: { slidesPerView: 2, slidesPerGroup: 1 },
						1024: { slidesPerView: 4, slidesPerGroup: 1 },
					},
				}}>
				<SwiperWrapper>
					{
						newsForSwiper.map((article) =>
							article ? (
								<SwiperSlide>
									<NewsCard
										title={article.title}
										excerpt={article.excerpt}
										date={article.date}
										category={article.category}
										image={article.image}
									/>
								</SwiperSlide>
							) : null,
						)
					}
				</SwiperWrapper>
				<SwiperButtonPrev addDefaultClass={true} class='!text-white'>
					<ChevronLeftIcon class='w-6 h-6 text-white' />
				</SwiperButtonPrev>
				<SwiperButtonNext addDefaultClass={true} class='!text-white'>
					<ChevronRightIcon class='w-6 h-6 text-white' />
				</SwiperButtonNext>
			</Swiper>
		</div>
	</div>
</section>

<style>
	.news-swiper-wrap :global(.news-swiper) {
		overflow: hidden;
		position: relative;
		width: 100%;
	}
	.news-swiper-wrap :global(.news-swiper .swiper-slide) {
		height: auto;
	}
	.news-swiper-wrap :global(.swiper-button-prev),
	.news-swiper-wrap :global(.swiper-button-next) {
		color: rgba(255, 255, 255, 0.9);
	}
	.news-swiper-wrap :global(.swiper-button-prev) {
		left: 0;
	}
	.news-swiper-wrap :global(.swiper-button-next) {
		right: 0;
	}
	.news-swiper-wrap :global(.swiper-button-disabled) {
		opacity: 0.3;
	}
</style>
