---
import SectionHeading from "../ui/SectionHeading.astro";
import ProductCard from "../cards/ProductCard.astro";
import { ButterIcon, FlourIcon, MilkIcon, YogurtIcon, GheeIcon } from "../../assets/icons";
import BajraIcon from "../../assets/bajray.png";
import BesanIcon from "../../assets/besan.png";
import MakaiIcon from "../../assets/makai.png";
import OatFlourIcon from "../../assets/oat_flour.png";
import { Image } from "astro:assets";
import Button from "../ui/Button.astro";
import { Swiper, SwiperWrapper, SwiperSlide, SwiperButtonPrev, SwiperButtonNext } from "astro-swiper";

const categories = [
	{ icon: ButterIcon, label: "Butter" },
	{ icon: FlourIcon, label: "Flour" },
	{ icon: MilkIcon, label: "Milk" },
	{ icon: YogurtIcon, label: "Yogurt" },
	{ icon: GheeIcon, label: "Ghee" },
];
const products = [
	{ name: "Bajray Ka Atta", icon: BajraIcon, weight: "5kg" },
	{ name: "Besan", icon: BesanIcon, weight: "10kg" },
	{ name: "Makkai ka Atta", icon: MakaiIcon, weight: "2kg" },
	{ name: "Oat Flour", icon: OatFlourIcon, weight: "1kg" },
];
---

<section id='products' class='py-12 md:py-16 bg-white'>
	<div class='px-6 md:px-10 lg:px-16 flex flex-col items-center'>
		<SectionHeading title='Products' subtitle='Pure organic products for everyday life' />

		<div class='flex flex-wrap justify-center gap-4 md:gap-6 lg:gap-8 mb-12'>
			{
				categories.map((category) => (
					<button class='flex flex-col items-center space-y-2 hover:transform hover:-translate-y-1 hover:!text-kfood-primary transition-transform cursor-pointer'>
						<Image src={category.icon} alt={category.label} class='w-12 h-12 md:w-16 md:h-16' />
						<span class='text-xs md:text-sm font-medium text-muted'>{category.label}</span>
					</button>
				))
			}
		</div>

		<div class='products-swiper-wrap w-full mx-auto mb-8'>
			<Swiper
				uniqueClass='products-swiper'
				useCustomElement={false}
				options={{
					slidesPerView: 4,
					spaceBetween: 24,
					loop: true,
					// navigation: true,
					autoplay: { delay: 4000, disableOnInteraction: false },
					breakpoints: {
						320: { slidesPerView: 1 },
						640: { slidesPerView: 2 },
						768: { slidesPerView: 3 },
						1024: { slidesPerView: 4 },
					},
				}}>
				<SwiperButtonPrev />
				<SwiperWrapper>
					{
						products.map((product) => (
							<SwiperSlide>
								<ProductCard name={product.name} weight={product.weight} image={product.icon} />
							</SwiperSlide>
						))
					}
				</SwiperWrapper>
				<SwiperButtonNext />
			</Swiper>
		</div>
	</div>

	<div class='flex flex-col items-center justify-center space-y-4 px-4'>
		<div class='text-center text-base md:text-lg font-normal mt-4 tracking-wide md:tracking-widest font-body max-w-2xl'>
			Discover a curated selection of KFood products available to shop online.
		</div>
		<Button
			variant='primary'
			size='lg'
			class='!bg-accent-orange !text-white !border-none w-[350px] !text-xl md:text-2xl lg:text-[30px]'>
			Shop Now
		</Button>
	</div>
</section>

<style>
	.products-swiper-wrap :global(.products-swiper) {
		overflow: hidden;
		position: relative;
		width: 100%;
	}
	.products-swiper-wrap :global(.products-swiper .swiper-slide) {
		height: auto;
	}
	.products-swiper-wrap :global(.swiper-button-prev),
	.products-swiper-wrap :global(.swiper-button-next) {
		color: #8a8a8a;
		width: 36px;
		height: 36px;
		top: 50%;
		margin-top: -18px;
	}
	.products-swiper-wrap :global(.swiper-button-prev) {
		left: 0;
	}
	.products-swiper-wrap :global(.swiper-button-next) {
		right: 0;
	}
	.products-swiper-wrap :global(.swiper-button-prev::after),
	.products-swiper-wrap :global(.swiper-button-next::after) {
		font-size: 22px;
	}
	.products-swiper-wrap :global(.swiper-button-disabled) {
		opacity: 0.3;
	}
</style>
